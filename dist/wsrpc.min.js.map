{"version":3,"sources":["dist/wsrpc.js"],"names":["global","factory","exports","module","define","amd","self","WSRPC","this","_classCallCheck","instance","Constructor","TypeError","Deferred","wrapper","func","done","apply","arguments","console","error","Error","resolve","reject","promise","Promise","isPending","logGroup","group","level","args","groupEnd","log","DEBUG","trace","msg","TRACE","payload","JSON","parse","data","readyState","Object","freeze","0","1","2","3","URL","reconnectTimeout","length","undefined","createSocket","ws","WebSocket","rejectQueue","deferred","connectionNumber","callQueue","callObj","shift","store","id","key","hasOwnProperty","tryCallEvent","event","e","stack","callEvents","evName","oneTimeEventStore","i","eventStore","onclose","err","serial","public","state","setTimeout","socket","exc","reconnect","onerror","onopen","ev","send","stringify","onmessage","message","type","routes","method","then","result","asyncRoutes","params","badPromise","promiseMock","handleCall","handleError","handleResult","socketEventsListeners","exception","url","test","window","location","host","concat","scheme","protocol","port","path","replace","getAbsoluteWsUrl","eventId","socketStarted","onconnect","onchange","defer","call","push","makeCall","addRoute","route","callback","isAsync","deleteRoute","addEventListener","removeEventListener","index","onEvent","destroy","close","stateCode","connect","addServerEventListener","callable","removeServerEventListener","splice","argsObj","info"],"mappings":"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"}